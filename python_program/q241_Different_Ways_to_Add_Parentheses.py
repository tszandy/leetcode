from typing import List
from collections import Counter,defaultdict
from math import *
from functools import reduce,lru_cache
import numpy as np
from heapq import *
from bisect import bisect_left

class Solution:
    def diffWaysToCompute(self, expression: str) -> List[int]:
        store_digits = [""]
        store_operator = []
        n = len(expression)
        for i in range(n):
            c = expression[i]
            if c == "*":
                store_operator.append("*")
                store_digits.append("")
            elif c== "-":
                store_operator.append("-")
                store_digits.append("")
            elif c== "+":
                store_operator.append("+")
                store_digits.append("")
            else:
                store_digits[-1]+=c
        
        store_digits = list(map(lambda x:int(x),store_digits))
        n = len(store_digits)
        def diff_ways_to_compute(l,r):
            if l==r:
                return [store_digits[l]]
            ans_list = []
            for i in range(l,r):
                left_list = diff_ways_to_compute(l,i)
                right_list = diff_ways_to_compute(i+1,r)
                for l_elem in left_list:
                    for r_elem in right_list:
                        ans_list.append(self.operator(l_elem,r_elem,store_operator[i]))
            return ans_list
        return diff_ways_to_compute(0,n-1)

    def operator(self,elem_1,elem_2,operator):
        if operator == "*":
            return elem_1*elem_2
        elif operator == "-":
            return elem_1-elem_2
        elif operator == "+":
            return elem_1+elem_2

sol = Solution()


# input
expression = "1+1+1"

# output
output = sol.diffWaysToCompute(expression)
# answer
answer = [3,3]
print(output, answer, answer == output)

# input
expression = "2-1-1"

# output
output = sol.diffWaysToCompute(expression)
# answer
answer = [2,0]
print(output, answer, answer == output)

# input
expression = "2*3-4*5"

# output
output = sol.diffWaysToCompute(expression)
# answer
answer = [-34,-10,-14,-10,10]
print(output, answer, answer == output)

# input
expression = "2*3-4*5*21*20+2-10*1"

# output
output = sol.diffWaysToCompute(expression)
# answer
answer = [-10074, -10074, -10074, -10074, -10074, -16474, -16474, -18074, -16474, -10074, -10074, -16474, -18074, -16474, -10074, -10074, -10074, -10074, -10074, -16730, -16730, -16730, -16730, -18394, -16794, -18394, -16730, -16730, -10074, -10074, -16474, -18074, -16474, -10074, -10074, -16730, -16730, -18394, -16794, -18394, -16730, -16730, -10074, -10074, -10074, -10074, -10074, -16474, -16474, -18074, -16474, -10074, -10074, -16474, -18074, -16474, -10074, -10074, -10074, -10074, -10074, -10074, -10074, -10074, -10074, -10074, -16778, -16778, -16778, -16778, -16778, -16778, -16778, -16778, -16778, -16778, -18454, -16854, -18454, -16790, -16790, -18454, -16854, -18454, -18454, -16778, -16778, -16778, -16778, -16778, -10074, -10074, -16474, -18074, -16474, -10074, -10074, -16730, -16730, -18394, -16794, -18394, -16730, -16730, -10074, -10074, -16474, -18074, -16474, -10074, -10074, -10074, -10074, -16778, -16778, -16778, -16778, -16778, -18454, -16854, -18454, -16790, -16790, -18454, -16854, -18454, -18454, -16778, -16778, -16778, -16778, -16778, -2520, -2520, -2520, -2520, -2520, -4120, -4120, -4520, -4120, -2520, -2520, -4120, -4520, -4120, -2520, -2520, -2520, -2520, -2520, -4184, -4184, -4184, -4184, -4600, -4200, -4600, -4184, -4184, -2520, -2520, -4120, -4520, -4120, -2520, -2520, -4184, -4184, -4600, -4200, -4600, -4184, -4184, -8568, -8568, -8568, -8568, -8568, -14008, -14008, -15368, -14008, -8568, -8568, -14008, -15368, -14008, -2520, -2520, -2520, -2520, -2520, -4120, -4120, -4520, -4120, -2520, -2520, -4120, -4520, -4120, -10008, -10008, -10008, -10008, -10008, -10008, -10008, -10008, -10008, -10008, -2520, -2520, -2520, -2520, -2520, -8568, -8568, -8568, -8568, -8568, -2520, -2520, -2520, -2520, -2520, -16810, -16810, -16810, -16810, -16810, -16810, -16810, -16810, -16810, -16810, -4216, -4216, -4216, -4216, -14296, -14296, -4216, -4216, -16696, -16696, -16696, -16696, -4216, -4216, -14296, -14296, -4216, -4216, -18494, -16894, -18494, -16830, -16830, -18494, -16894, -18494, -18494, -16818, -16818, -16818, -16818, -16818, -4640, -4240, -4640, -4224, -4224, -15728, -14368, -4640, -4240, -18368, -18368, -4640, -15728, -4640, -16810, -16810, -16810, -16810, -16810, -4216, -4216, -14296, -4216, -16696, -16696, -4216, -14296, -4216, -10074, -10074, -16474, -18074, -16474, -10074, -10074, -16730, -16730, -18394, -16794, -18394, -16730, -16730, -10074, -10074, -16474, -18074, -16474, -10074, -10074, -10074, -10074, -16778, -16778, -16778, -16778, -16778, -18454, -16854, -18454, -16790, -16790, -18454, -16854, -18454, -18454, -16778, -16778, -16778, -16778, -16778, -2520, -2520, -4120, -4520, -4120, -2520, -2520, -4184, -4184, -4600, -4200, -4600, -4184, -4184, -8568, -8568, -14008, -15368, -14008, -2520, -2520, -4120, -4520, -4120, -10008, -10008, -10008, -10008, -2520, -2520, -8568, -8568, -2520, -2520, -16810, -16810, -16810, -16810, -16810, -4216, -4216, -14296, -4216, -16696, -16696, -4216, -14296, -4216, -18494, -16894, -18494, -16830, -16830, -18494, -16894, -18494, -18494, -16818, -16818, -16818, -16818, -16818, -4640, -4240, -4640, -4224, -4224, -15728, -14368, -4640, -4240, -18368, -18368, -4640, -15728, -4640, -16810, -16810, -16810, -16810, -16810, -4216, -4216, -14296, -4216, -16696, -16696, -4216, -14296, -4216, -5034, -5034, -5034, -5034, -5034, -8234, -8234, -9034, -8234, -5034, -5034, -8234, -9034, -8234, -5034, -5034, -5034, -5034, -5034, -8362, -8362, -8362, -8362, -9194, -8394, -9194, -8362, -8362, -5034, -5034, -8234, -9034, -8234, -5034, -5034, -8362, -8362, -9194, -8394, -9194, -8362, -8362, -5034, -5034, -5034, -5034, -5034, -8234, -8234, -9034, -8234, -5034, -5034, -8234, -9034, -8234, -5034, -5034, -5034, -5034, -5034, -5034, -5034, -5034, -5034, -5034, -8386, -8386, -8386, -8386, -8386, -8386, -8386, -8386, -8386, -8386, -9224, -8424, -9224, -8392, -8392, -9224, -8424, -9224, -9224, -8386, -8386, -8386, -8386, -8386, -5034, -5034, -8234, -9034, -8234, -5034, -5034, -8362, -8362, -9194, -8394, -9194, -8362, -8362, -5034, -5034, -8234, -9034, -8234, -5034, -5034, -5034, -5034, -8386, -8386, -8386, -8386, -8386, -9224, -8424, -9224, -8392, -8392, -9224, -8424, -9224, -9224, -8386, -8386, -8386, -8386, -8386, -2520, -2520, -2520, -2520, -2520, -4120, -4120, -4520, -4120, -2520, -2520, -4120, -4520, -4120, -2520, -2520, -2520, -2520, -2520, -4184, -4184, -4184, -4184, -4600, -4200, -4600, -4184, -4184, -2520, -2520, -4120, -4520, -4120, -2520, -2520, -4184, -4184, -4600, -4200, -4600, -4184, -4184, 2520, 2520, 2520, 2520, 2520, 4120, 4120, 4520, 4120, 2520, 2520, 4120, 4520, 4120, 2520, 2520, 2520, 2520, 2520, 4184, 4184, 4184, 4184, 4600, 4200, 4600, 4184, 4184, 2520, 2520, 4120, 4520, 4120, 2520, 2520, 4184, 4184, 4600, 4200, 4600, 4184, 4184, -8568, -8568, -8568, -8568, -8568, -14008, -14008, -15368, -14008, -8568, -8568, -14008, -15368, -14008, -2520, -2520, -2520, -2520, -2520, -4120, -4120, -4520, -4120, -2520, -2520, -4120, -4520, -4120, -3528, -3528, -3528, -3528, -3528, -5768, -5768, -6328, -5768, -3528, -3528, -5768, -6328, -5768, -2520, -2520, -2520, -2520, -2520, -4120, -4120, -4520, -4120, -2520, -2520, -4120, -4520, -4120, 2520, 2520, 2520, 2520, 2520, 4120, 4120, 4520, 4120, 2520, 2520, 4120, 4520, 4120, -10008, -10008, -10008, -10008, -10008, -10008, -10008, -10008, -10008, -10008, -2520, -2520, -2520, -2520, -2520, -8568, -8568, -8568, -8568, -8568, -2520, -2520, -2520, -2520, -2520, -4968, -4968, -4968, -4968, -4968, -4968, -4968, -4968, -4968, -4968, -2520, -2520, -2520, -2520, -2520, 2520, 2520, 2520, 2520, 2520, -8568, -8568, -8568, -8568, -8568, -2520, -2520, -2520, -2520, -2520, -3528, -3528, -3528, -3528, -3528, -2520, -2520, -2520, -2520, -2520, 2520, 2520, 2520, 2520, 2520, -16802, -16802, -16802, -16802, -16802, -16802, -16802, -16802, -16802, -16802, -4208, -4208, -4208, -4208, -14288, -14288, -4208, -4208, -16688, -16688, -16688, -16688, -4208, -4208, -14288, -14288, -4208, -4208, -8402, -8402, -8402, -8402, -8402, -8402, -8402, -8402, -8402, -8402, -4208, -4208, -4208, -4208, 4192, 4192, 4192, 4192, -14288, -14288, -4208, -4208, -5888, -5888, -4208, -4208, 4192, 4192, -16688, -16688, -16688, -16688, -4208, -4208, -14288, -14288, -4208, -4208, -8288, -8288, -8288, -8288, -4208, -4208, 4192, 4192, -14288, -14288, -4208, -4208, -5888, -5888, -4208, -4208, 4192, 4192, -18484, -16884, -18484, -16820, -16820, -18484, -16884, -18484, -18484, -16808, -16808, -16808, -16808, -16808, -4630, -4230, -4630, -4214, -4214, -15718, -14358, -4630, -4230, -18358, -18358, -4630, -15718, -4630, -16800, -16800, -16800, -16800, -16800, -4206, -4206, -14286, -4206, -16686, -16686, -4206, -14286, -4206, -9244, -8444, -9244, -8412, -8412, -9244, -8444, -9244, -9244, -8406, -8406, -8406, -8406, -8406, -4630, -4230, -4630, -4214, -4214, 4610, 4210, 4610, 4194, 4194, -15718, -14358, -4630, -4230, -6478, -5918, -4630, -4230, 4610, 4210, -18358, -18358, -4630, -15718, -4630, -9118, -9118, -4630, 4610, -15718, -4630, -6478, -4630, 4610, -16802, -16802, -16802, -16802, -16802, -4208, -4208, -14288, -4208, -16688, -16688, -4208, -14288, -4208, -8402, -8402, -8402, -8402, -8402, -4208, -4208, 4192, 4192, -14288, -4208, -5888, -4208, 4192, -16688, -16688, -4208, -14288, -4208, -8288, -8288, -4208, 4192, -14288, -4208, -5888, -4208, 4192, -10074, -10074, -16474, -18074, -16474, -10074, -10074, -16730, -16730, -18394, -16794, -18394, -16730, -16730, -10074, -10074, -16474, -18074, -16474, -10074, -10074, -10074, -10074, -16778, -16778, -16778, -16778, -16778, -18454, -16854, -18454, -16790, -16790, -18454, -16854, -18454, -18454, -16778, -16778, -16778, -16778, -16778, -2520, -2520, -4120, -4520, -4120, -2520, -2520, -4184, -4184, -4600, -4200, -4600, -4184, -4184, -8568, -8568, -14008, -15368, -14008, -2520, -2520, -4120, -4520, -4120, -10008, -10008, -10008, -10008, -2520, -2520, -8568, -8568, -2520, -2520, -16810, -16810, -16810, -16810, -16810, -4216, -4216, -14296, -4216, -16696, -16696, -4216, -14296, -4216, -18494, -16894, -18494, -16830, -16830, -18494, -16894, -18494, -18494, -16818, -16818, -16818, -16818, -16818, -4640, -4240, -4640, -4224, -4224, -15728, -14368, -4640, -4240, -18368, -18368, -4640, -15728, -4640, -16810, -16810, -16810, -16810, -16810, -4216, -4216, -14296, -4216, -16696, -16696, -4216, -14296, -4216, -5034, -5034, -8234, -9034, -8234, -5034, -5034, -8362, -8362, -9194, -8394, -9194, -8362, -8362, -5034, -5034, -8234, -9034, -8234, -5034, -5034, -5034, -5034, -8386, -8386, -8386, -8386, -8386, -9224, -8424, -9224, -8392, -8392, -9224, -8424, -9224, -9224, -8386, -8386, -8386, -8386, -8386, -2520, -2520, -4120, -4520, -4120, -2520, -2520, -4184, -4184, -4600, -4200, -4600, -4184, -4184, 2520, 2520, 4120, 4520, 4120, 2520, 2520, 4184, 4184, 4600, 4200, 4600, 4184, 4184, -8568, -8568, -14008, -15368, -14008, -2520, -2520, -4120, -4520, -4120, -3528, -3528, -5768, -6328, -5768, -2520, -2520, -4120, -4520, -4120, 2520, 2520, 4120, 4520, 4120, -10008, -10008, -10008, -10008, -2520, -2520, -8568, -8568, -2520, -2520, -4968, -4968, -4968, -4968, -2520, -2520, 2520, 2520, -8568, -8568, -2520, -2520, -3528, -3528, -2520, -2520, 2520, 2520, -16802, -16802, -16802, -16802, -16802, -4208, -4208, -14288, -4208, -16688, -16688, -4208, -14288, -4208, -8402, -8402, -8402, -8402, -8402, -4208, -4208, 4192, 4192, -14288, -4208, -5888, -4208, 4192, -16688, -16688, -4208, -14288, -4208, -8288, -8288, -4208, 4192, -14288, -4208, -5888, -4208, 4192, -18484, -16884, -18484, -16820, -16820, -18484, -16884, -18484, -18484, -16808, -16808, -16808, -16808, -16808, -4630, -4230, -4630, -4214, -4214, -15718, -14358, -4630, -4230, -18358, -18358, -4630, -15718, -4630, -16800, -16800, -16800, -16800, -16800, -4206, -4206, -14286, -4206, -16686, -16686, -4206, -14286, -4206, -9244, -8444, -9244, -8412, -8412, -9244, -8444, -9244, -9244, -8406, -8406, -8406, -8406, -8406, -4630, -4230, -4630, -4214, -4214, 4610, 4210, 4610, 4194, 4194, -15718, -14358, -4630, -4230, -6478, -5918, -4630, -4230, 4610, 4210, -18358, -18358, -4630, -15718, -4630, -9118, -9118, -4630, 4610, -15718, -4630, -6478, -4630, 4610, -16802, -16802, -16802, -16802, -16802, -4208, -4208, -14288, -4208, -16688, -16688, -4208, -14288, -4208, -8402, -8402, -8402, -8402, -8402, -4208, -4208, 4192, 4192, -14288, -4208, -5888, -4208, 4192, -16688, -16688, -4208, -14288, -4208, -8288, -8288, -4208, 4192, -14288, -4208, -5888, -4208, 4192]
print(output, answer, answer == output)
